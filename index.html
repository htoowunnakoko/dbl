<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Myanmar Income Tax Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    h2, h3 {
      text-align: center;
    }
    .input-group {
      margin: 10px 0;
    }
    label {
      margin-right: 10px;
    }
    input[type="number"] {
      width: 150px;
    }
    #totalAllowance, #taxableIncome, #taxBreakdown, #totalTax {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <h2>Myanmar Income Tax Calculator</h2>
  <p>For DBL class. Section-20(c): Professional and Salary Income Tax</p>
	<p>ကိုယ့်ဘာသာ အပျင်းထူဖို့ .. မှားရင်လဲ မှားမယ် .. သိဘူးရယ်</p>

  <div class="input-group">
    <label>Net Taxable Income (MMK)</label>
    <input type="number" id="netIncome" placeholder="Enter your net income">
  </div>

  <div class="input-group">
    <input type="checkbox" id="married">
    <label for="married">Married (Spouse allowance)</label>
  </div>

  <div class="input-group">
    <label>Living with parents:</label>
    <input type="number" id="parents" min="0" value="0">
  </div>

  <div class="input-group">
    <label>Number of children:</label>
    <input type="number" id="children" min="0" value="0">
  </div>

  <button onclick="calculateTax()">Calculate Tax</button>

  <!-- Total Allowance section -->
  <div id="totalAllowance" class="hidden">
    <h3>Total Allowance</h3>
    <p id="basicAllowanceDisplay"></p>
    <p id="spouseAllowanceDisplay"></p>
    <p id="parentsAllowanceDisplay"></p>
    <p id="childrenAllowanceDisplay"></p>
  </div>

  <!-- Taxable Income section -->
  <div id="taxableIncome" class="hidden">
    <h3>Taxable Income</h3>
    <p id="taxableIncomeDisplay"></p>
  </div>

  <!-- Tax Breakdown section -->
  <div id="taxBreakdown" class="hidden">
    <h3>Tax Breakdown</h3>
    <p id="taxBreakdownDisplay"></p>
  </div>

  <!-- Total Tax section -->
  <div id="totalTax" class="hidden">
    <h3>Total Tax</h3>
    <p id="totalTaxDisplay"></p>
  </div>

  <script>
    function calculateTax() {
      const netIncome = Number(document.getElementById('netIncome').value);
      const married = document.getElementById('married').checked;
      const parents = Number(document.getElementById('parents').value);
      const children = Number(document.getElementById('children').value);

      // Basic Allowance: 20% capped at 10,000,000 MMK
      let basicAllowance = Math.min(netIncome * 0.2, 10000000);

      // Spouse allowance
      let spouseAllowance = married ? 1000000 : 0;

      // Parents allowance
      let parentsAllowance = parents * 1000000;

      // Children allowance
      let childrenAllowance = children * 500000;

      // Total allowance
      let totalAllowance = basicAllowance + spouseAllowance + parentsAllowance + childrenAllowance;

      // Taxable income
      let taxableIncome = netIncome - totalAllowance;
      if (taxableIncome < 0) taxableIncome = 0;

      // Display allowances
      document.getElementById('basicAllowanceDisplay').innerText = `Basic Allowance: ${basicAllowance.toLocaleString()} MMK`;
      document.getElementById('spouseAllowanceDisplay').innerText = `Spouse Allowance: ${spouseAllowance.toLocaleString()} MMK`;
      document.getElementById('parentsAllowanceDisplay').innerText = `Parents Allowance: ${parentsAllowance.toLocaleString()} MMK`;
      document.getElementById('childrenAllowanceDisplay').innerText = `Children Allowance: ${childrenAllowance.toLocaleString()} MMK`;
      document.getElementById('totalAllowance').classList.remove('hidden');

      // Display taxable income
      document.getElementById('taxableIncomeDisplay').innerText = taxableIncome.toLocaleString() + " MMK";
      document.getElementById('taxableIncome').classList.remove('hidden');

      // Myanmar Tax Slabs
      const slabs = [
        { max: 2000000, rate: 0 },
        { max: 10000000, rate: 0.05 },
        { max: 30000000, rate: 0.10 },
        { max: 50000000, rate: 0.15 },
        { max: 70000000, rate: 0.20 },
        { max: Infinity, rate: 0.25 }
      ];

      let remainingIncome = taxableIncome;
      let previousMax = 0;
      let taxBreakdown = [];
      let totalTax = 0;

      for (let i = 0; i < slabs.length; i++) {
        let slabIncome = Math.min(remainingIncome, slabs[i].max - previousMax);
        if (slabIncome > 0) {
          let tax = slabIncome * slabs[i].rate;
          taxBreakdown.push(`${(slabs[i].rate*100).toFixed(0)}% on ${slabIncome.toLocaleString()} = ${tax.toLocaleString()} MMK`);
          totalTax += tax; // calculate total tax directly
          remainingIncome -= slabIncome;
        }
        previousMax = slabs[i].max;
      }

      document.getElementById('taxBreakdownDisplay').innerHTML = taxBreakdown.join('<br>');
      document.getElementById('taxBreakdown').classList.remove('hidden');

      // Display total tax
      document.getElementById('totalTaxDisplay').innerText = totalTax.toLocaleString() + " MMK";
      document.getElementById('totalTax').classList.remove('hidden');
    }
  </script>

</body>
</html>
